<!-- app/views/employees/show.html.erb -->
<h1><%= @employee.first_name %> <%= @employee.last_name %></h1>

<h2>Statuses</h2>

<%= link_to "New Status", new_status_path, class: "btn btn-primary" %>

<%= form_tag(filter_by_date_employee_path(@employee), method: :get) do %>
  <%= label_tag :date, "Filter by Date:" %>
  <%= date_field_tag :date %>
  <%= submit_tag "Filter", class: "btn btn-secondary" %>
<% end %>

<%= form_tag(filter_by_year_employee_path(@employee), method: :get) do %>
  <%= label_tag :year, "Filter by Year:" %>
  <%= number_field_tag :year %>
  <%= submit_tag "Filter", class: "btn btn-secondary" %>
<% end %>

<%= form_tag(filter_by_month_employee_path(@employee), method: :get) do %>
  <%= label_tag :year, "Filter by Year:" %>
  <%= number_field_tag :year %>
  <%= label_tag :month, "Filter by Month:" %>
  <%= number_field_tag :month %>
  <%= submit_tag "Filter", class: "btn btn-secondary" %>
<% end %>

<table>
  <thead>
    <tr>
      <th>Date</th>
      <th>GitHub PR Link</th>
      <th>Remarks</th>
      <th>Actions</th>
    </tr>
  </thead>
  <tbody>
    <% @employee.statuses.each do |status| %>
      <tr>
        <td><%= status.created_at.strftime("%Y-%m-%d") %></td>
        <td><%= link_to status.github_pr_link, status.github_pr_link %></td>
        <td><%= status.remarks || "None" %></td>
        <td>
          <%= link_to "Resolve Remarks", resolve_remarks_employee_path(@employee, status), method: :patch, class: "btn btn-warning", data: { confirm: "Are you sure you want to resolve remarks for this status?" } %>
        </td>          
      </tr>
    <% end %>
  </tbody>
</table>

<%= link_to "Back", employees_path, class: "btn btn-secondary" %>
